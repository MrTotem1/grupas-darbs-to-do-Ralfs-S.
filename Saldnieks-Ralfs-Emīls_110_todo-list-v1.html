<!DOCTYPE html>
<!--Ralfs Saldnieks v1-->
<!--Roberts Onzuls v2-->
<html>
    <head>
        <meta charset="UTF-8" />
        <!-- Bootstrap 5, iepreikš bija 4 kur nav pareizais nosvītrojums-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body onload="loadData()">
        <div class="container card mt-3 p-3">
            <h3 class="text-center">Mani darbi</h3>

            <div class="input-group mb-3">
                <input class="form-control" type="text" id="text" placeholder="Ieraksti darbu...">
                <button onclick="addElement()" class="btn btn-primary" type="button">Pievienot</button>
            </div>

            <ul id="task-list" class="list-group"></ul>
        </div>

        <script>
            function saveData() {
                const tasks = [];
                document.querySelectorAll("#task-list li").forEach(li => {
                    tasks.push({
                        text: li.childNodes[0].textContent,
                        done: li.classList.contains("text-decoration-line-through")
                    });
                });
                localStorage.setItem("tasks", JSON.stringify(tasks));
            }

            function loadData() {
                const data = JSON.parse(localStorage.getItem("tasks")) || [];
                data.forEach(task => createTask(task.text, task.done));
            }

            function createTask(text, done = false) {
                const node = document.createElement("li");
                node.className = "list-group-item";
                node.textContent = text;

                if (done) {
                    node.classList.add("text-decoration-line-through");
                }

                node.onclick = function () {
                    node.classList.toggle("text-decoration-line-through");
                    saveData();
                };

                const deleteButton = document.createElement("button");
                deleteButton.textContent = "Dzēst";
                deleteButton.className = "btn btn-danger btn-sm float-end";
                deleteButton.onclick = function (e) {
                    e.stopPropagation();
                    node.remove();
                    saveData();
                };

                node.appendChild(deleteButton);
                document.getElementById("task-list").appendChild(node);
            }

            function addElement() {
                const text = document.getElementById("text").value;
                if (text === "") return;

                document.getElementById("text").value = "";
                createTask(text);
                saveData();
            }
        </script>
    </body>
</html>
